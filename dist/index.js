var r=require("svg-parser");function t(r){return r&&"object"==typeof r&&"default"in r?r:{default:r}}var e=t(require("svgpath")),n=Object.assign||function(r){[].slice.call(arguments,1).forEach(function(t){Object.keys(t).forEach(function(e){r[e]=t[e]})})};function o(r,t){var e={};return Object.keys(r).forEach(function(n){~t.indexOf(n)||(e[n]=r[n])}),e}function i(r){for(var t="",e="M",n=0;n<r.length;n+=2)t+=""+e+r[n]+","+r[n+1],e=" ";return t}var a={ellipse:function(r){var t=r.cx||0,e=r.cy||0,n=r.rx||0,i=r.ry||0,a=o(r,["cx","cy","rx","ry"]);return a.d="M"+(t-n)+","+e+"a"+n+","+i+" 0 1,0 "+2*n+",0a"+n+","+i+" 0 1,0 "+-2*n+",0",a},circle:function(r){var t=r.cx||0,e=r.cy||0,n=r.r||0,i=o(r,["cx","cy","r"]);return i.d="M"+(t-n)+","+e+"a"+n+","+n+" 0 1,0 "+2*n+",0a"+n+","+n+" 0 1,0 "+-2*n+",0",i},polygon:function(r){var t=a.polyline(r);return t.d+="Z",t},polyline:function(r){var t=o(r,"points");return t.d=i(r.points.trim().split(/[\s,]+/)),t},rect:function(r){var t=+r.x||0,e=+r.y||0,n=+r.width||0,i=+r.height||0,a=o(r,["x","y","width","height","rx","ry"]);return a.d="m"+t+","+e+" "+n+",0 0,"+i+" "+-n+",0Z",a},line:function(r){var t=o(r,["x1","y1","x2","y2"]);return t.d=i([r.x1||0,r.y1||0,r.x2||0,r.y2||0]),t}};function c(r,t){r.properties=n(t,r.properties)}function s(r,t){r.properties.class&&(t=n({},t),r.properties.class.split(" ").filter(Boolean).forEach(function(r){return t[r]=!0}));var e=Object.keys(t).join(" ");e&&(r.properties.class=e)}function u(r,t){r.properties.transform&&(t=t.concat(r.properties.transform),delete r.properties.transform);var n=t.join(" ");"path"===r.tagName?r.properties.d=e.default(r.properties.d).transform(n).round(10).toString():n&&(r.properties.transform=n)}var p=["defs","title"],f=["id","class","style","transform"];function l(r,t,e,i,h){if("svg"===r.tagName){var g=e.slice();r.children.forEach(function(r){l(r,t,g,n({},i),n({},h))})}else"g"===r.tagName?(e=r.properties.transform?e.concat(r.properties.transform):e,r.properties.class&&r.properties.class.split(" ").filter(Boolean).forEach(function(r){return i[r]=!0}),r.children.forEach(function(a){var c=n({},i),s=n(o(h,f),o(r.properties,f));l(a,t,e,c,s)})):~p.indexOf(r.tagName)?(c(r,h),s(r,i),u(r,e),t.push(r)):(c(r,h),s(r,i),"path"!==r.tagName&&(r=function(r){var t=a[r.tagName];if(t)return{tagName:"path",properties:t(r.properties)};throw new Error("TODO <"+r.tagName+">")}(r)),u(r,e),t.push(r))}function h(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function g(r,t){if("string"==typeof r)return r;var e=function(r){return Object.keys(r).map(function(t){return" "+t+'="'+r[t]+'"'}).join("")}(r.properties),n=t+"<"+r.tagName+e;if(r.children&&r.children.length){n+=">";for(var o,i="\n",a=function(r,t){var e;if("undefined"==typeof Symbol||null==r[Symbol.iterator]){if(Array.isArray(r)||(e=function(r,t){if(r){if("string"==typeof r)return h(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?h(r,t):void 0}}(r))){e&&(r=e);var n=0;return function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(e=r[Symbol.iterator]()).next.bind(e)}(r.children);!(o=a()).done;){var c=o.value;"string"==typeof c?(n+=c,i=""):"text"===c.type?(n+=c.value,i=""):(n+=i+g(c,t+"\t"),i="\n")}i&&(i+=t),n+=i+"</"+r.tagName+">"}else n+=r.value?">"+r.value+"</"+r.tagName+">":"/>";return n}var y=function(){function t(t){this.source=r.parse(t).children[0],this.target={tagName:this.source.tagName,properties:Object.assign({},this.source.properties),children:[]},l(this.source,this.target.children,[],{},{})}return t.prototype.toString=function(){return g(this.target,"")},t}();exports.parse=function(r){var t=new y(r);return{paths:t.target.children.filter(function(r){return"path"===r.tagName}).map(function(r){return r.properties}),toString:function(){return t.toString()}}},exports.transform=function(r){return new y(r).toString()};
//# sourceMappingURL=index.js.map
